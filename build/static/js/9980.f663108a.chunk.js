"use strict";(self.webpackChunkamourette=self.webpackChunkamourette||[]).push([[9980],{4500:(e,s,a)=>{a.r(s),a.d(s,{default:()=>y});var t=a(5043),l=a(1462),o=a(3216),n=a(5700),i=a(6990),r=a(4297),c=(a(4220),a(793)),d=a(7089),m=a(4282),u=a(6213),p=a(4117),h=a(2862),g=a(9564),x=a(3538),j=a(494),v=(a(228),a(2074)),N=a(3996),f=a(579);function y(){const e=(0,o.Zp)(),[s,a]=(0,t.useState)(!1),[y,b]=(0,t.useState)(""),[S,_]=(0,t.useState)(""),[w,A]=(0,t.useState)(""),[C,k]=(0,t.useState)(""),[I,O]=(0,t.useState)([]),[R,E]=(0,t.useState)(!1),[T,L]=(0,t.useState)(!1),[$,q]=(0,t.useState)(!0),[J,F]=(0,t.useState)(""),[U,M]=(0,t.useState)(""),[B,Y]=(0,t.useState)(""),[P,K]=(0,t.useState)(!1),[z,D]=(0,t.useState)(!1),[H,W]=(0,t.useState)([]),[V,X]=(0,t.useState)(!1),[Z,G]=(0,t.useState)(1),[Q,ee]=(0,t.useState)([]),[se,ae]=(0,t.useState)([]),[te,le]=(0,t.useState)([]),[oe,ne]=(0,t.useState)([]),[ie,re]=(0,t.useState)(null),[ce,de]=(0,t.useState)(!1),[me,ue]=(0,t.useState)(""),[pe,he]=(0,t.useState)(""),[ge,xe]=(0,t.useState)(""),[je,ve]=(0,t.useState)(null),[Ne,fe]=(0,t.useState)(""),[ye,be]=(0,t.useState)(""),[Se,_e]=(0,t.useState)(""),{id:we,image_url:Ae}=(0,o.g)(),[Ce,ke]=(decodeURIComponent(Ae),(0,t.useState)(0)),Ie=localStorage.getItem("userLogin"),Oe=Ie?JSON.parse(Ie):null;(0,t.useEffect)((()=>(document.body.style.overflowY=V?"hidden":"auto",()=>{document.body.style.overflowY="auto"})),[V]);var Re="https://backend.amourette.no/api/members/";(0,t.useEffect)((()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;re(s)}),[]),(0,t.useEffect)((()=>{we&&Ee(we)}),[we]);const Ee=async e=>{const s=localStorage.getItem("userLogin");let a={user_id:(s?JSON.parse(s):null).id,album_id:e};try{var t=(await u.A.post(Re+"getpreviewtemediaalbum",a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;if(t.results.length>0){M(t.results[0].m_id),he(t.results[0].name),fe(t.results[0].user_id),k(t.results[0].name);let e=[],s=[];t.results.forEach((e=>{try{const a=JSON.parse(e.images);Array.isArray(a)&&a.forEach((a=>{const t={url:a,id:e.m_id,type:null,cover_image:e.cover_image};t&&s.push(t)}))}catch(ge){console.error("Error parsing images JSON:",ge)}})),le(s),ne(e),ke(0)}}catch(l){l.response||l.request}};(0,t.useEffect)((()=>{decodeURIComponent(Ae);const s=te.findIndex((e=>e.url===Ae));console.log(s,we,"lll"),-1!==s?(Ge(U,Ae,s),e(`/previewimages/${we}`,{replace:!0})):console.log("Image not found in mediaImages")}),[we,Ae,te,Ne,U]);const Te=(e,s)=>{ee(e),G(s),X(!0)},{t:Le}=(0,p.Bd)();(0,t.useEffect)((()=>{const e=localStorage.getItem("language")||"en";h.A.language!==e&&h.A.changeLanguage(e)}),[h.A,Le]);const $e=async e=>{ue(e),K(!0),Y("Are you sure? You want delete this")},qe=async e=>{const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;let l={id:we,user_id:t.id,coverphoto:e};try{await u.A.post(Re+"setCoverphoto",l,{headers:{Accept:"application/json","Content-Type":"application/json"}});Be(!1),a(!0),b("Cover photo has been set successfully."),Ee(we),setTimeout((()=>{a(!1)}),800)}catch(o){o.response?console.error("Server Response Error:",o.response.data):o.request?console.error("No Response Received:",o.request):console.error("Request Error:",o.message)}},Je=async e=>{E(!0);const s=localStorage.getItem("userLogin"),a=s?JSON.parse(s):null;let t={id:we,user_id:a.id};A(e);try{const e=await u.A.post(Re+"getmediaAlbumName",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});O(e.data.results)}catch(l){l.response?console.error("Server Response Error:",l.response.data):l.request?console.error("No Response Received:",l.request):console.error("Request Error:",l.message)}},Fe=()=>{de(!1),E(!1)},Ue=(0,t.useRef)(null),[Me,Be]=(0,t.useState)(!1),Ye=e=>{Be(Me===e?null:e)},[Pe,Ke]=(0,t.useState)(null),[ze,De]=(0,t.useState)(null),[He,We]=(0,t.useState)(!1),[Ve,Xe]=(0,t.useState)([]),Ze=()=>{We(!0),document.body.style.overflowY="hidden"},Ge=async(e,s,a)=>{be(e),_e(s),ke(a);const t=localStorage.getItem("userLogin");t&&JSON.parse(t);let l={file:s,id:e,user_id:Ne};console.log(l);try{const a=(await u.A.post(Re+"getuseralbumFile",l,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;console.log(a),!0===a.matched&&(Ke(a.results),De(s),Qe(s,e),Ze())}catch(o){}},Qe=async(e,s)=>{const a=localStorage.getItem("userLogin");a&&JSON.parse(a);let t={file:e,id:s,user_id:Ne};try{const e=(await u.A.post(Re+"getUseralbumsComments",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;console.log(e.album),Xe(e.album.comments)}catch(l){}};return console.log(te),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(n.A,{}),s&&(0,f.jsx)(c.A,{message:y}),(0,f.jsx)(g.M,{isOpen1:P,onClose1:()=>{K(!1)},message:B,onReturnSent:async()=>{(async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id,image:me,id:U};try{(await u.A.post(Re+"privatealbumdelete",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data,K(!1),Ee(we)}catch(a){}})()}}),(0,f.jsx)("section",{className:"ggboxes d-block gapy",children:(0,f.jsxs)("div",{className:"container-lg",children:[(0,f.jsxs)("div",{className:"row gy-4 mb-5",children:[(0,f.jsxs)("div",{className:"col-md-6",children:[(0,f.jsx)("h2",{className:"pagetitle",children:`${Le("Photos")}`}),(0,f.jsxs)("strong",{children:["(",pe,")"]})]}),(0,f.jsx)("div",{className:"col-md-6",children:(0,f.jsx)("div",{className:"d-flex justify-content-md-end"})})]}),(0,f.jsx)("div",{className:"row",children:(0,f.jsx)("div",{className:"col-12",children:(0,f.jsxs)(r.tU,{children:[(0,f.jsx)(r.wb,{children:(0,f.jsxs)("div",{className:"d-flex align-items-center justify-content-between w-100",children:[(0,f.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,f.jsx)(r.oz,{children:`${Le("Media")}`}),(0,f.jsx)("button",{type:"button",onClick:()=>e(`/friend/${Ne}`),className:"btn backbtn",children:"Back"})]}),Oe.id===Ne&&(0,f.jsx)("button",{className:"react-tabs__tab react-tabs__tab--selected",type:"button",onClick:()=>{de(!0)},children:Le("Upload")})]})}),(0,f.jsx)(r.Kp,{children:(0,f.jsx)("div",{className:"row gy-4",children:te.length>0?te.map(((e,s)=>(0,f.jsx)("div",{className:"col-md-3",children:(0,f.jsx)("div",{className:"d-flex flex-column gap-2",children:(0,f.jsxs)("div",{className:"ggimagebox ofit position-relative",children:[(0,f.jsx)(v.A,{className:"hover-shadow",url:e.url,onClick:()=>Ge(e.id,e.url,s)}),e.url===e.cover_image&&(0,f.jsx)(f.Fragment,{children:Oe.id===Ne&&(0,f.jsx)("div",{className:"d-flex flex-column gap-3 image_center_ w-100",children:(0,f.jsxs)("div",{style:{position:"relative",display:"inline-block"},className:"d-flex justify-content-between align-items-center gap-3 w-100",children:[e.url===e.cover_image&&(0,f.jsx)("button",{className:"py-1",type:"button",title:Le("Cover_photo"),children:(0,f.jsx)(N.A,{})}),(0,f.jsx)("button",{className:"remove_mess",onClick:()=>Ye(s),children:(0,f.jsx)(x.Kak,{})}),Me===s&&(0,f.jsxs)("ul",{className:"popup-menu w-fit",children:[(0,f.jsx)("li",{onClick:()=>$e(e.url),children:Le("delete")}),(0,f.jsx)("li",{onClick:()=>Je(e.url),children:Le("MOve_to")}),(0,f.jsx)("li",{onClick:()=>qe(e.url),children:Le("Cover_photo")})]})]})})}),e.url!=e.cover_image&&(0,f.jsx)(f.Fragment,{children:Oe.id===Ne&&(0,f.jsx)("div",{className:"d-flex flex-column gap-3 image_center_ w-100",children:(0,f.jsxs)("div",{style:{position:"relative",display:"inline-block"},className:"d-flex justify-content-end align-items-end gap-3 w-100",children:[(0,f.jsx)("button",{className:"remove_mess",onClick:()=>Ye(s),children:(0,f.jsx)(x.Kak,{})}),Me===s&&(0,f.jsxs)("ul",{className:"popup-menu w-fit",children:[(0,f.jsx)("li",{onClick:()=>$e(e.url),children:Le("delete")}),(0,f.jsx)("li",{onClick:()=>Je(e.url),children:Le("MOve_to")}),(0,f.jsx)("li",{onClick:()=>qe(e.url),children:Le("Cover_photo")})]})]})})})]})})},s))):(0,f.jsxs)("p",{children:[`${Le("No_avalibale_media")}`,"."]})})}),(0,f.jsx)(r.Kp,{children:(0,f.jsxs)("div",{className:"row gy-4",children:[!z&&se.length>0?se.map(((e,s)=>(0,f.jsx)("div",{className:"col-md-3",children:(0,f.jsx)("div",{className:"d-flex flex-column gap-2",children:(0,f.jsxs)("div",{className:"ggimagebox ofit",children:[(0,f.jsx)("img",{src:e.img,alt:"Media",onClick:()=>(async e=>{let s={album_id:e};try{const e=await u.A.post(Re+"getallmediaa",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(e&&e.data&&e.data.results){const s=e.data.results.map((e=>{let s=[];if(e.images&&"undefined"!==e.images&&""!==e.images)try{s=JSON.parse(e.images)}catch(a){console.error("Error parsing images for item:",e.id,a),s=[]}return{mediaItems:s.filter((e=>e.match(/\.(jpeg|jpg|png|gif|webp)$/i)||e.match(/\.(mp4|mov|avi|mkv|webm|ogg|flv|3gp|mkv|webm)$/i)))}}));D(!0),W(s)}}catch(a){a.response?console.error("Server Response Error:",a.response.data):a.request?console.error("No Response Received:",a.request):console.error("Request Error:",a.message)}})(e.album_id),className:"hover-shadow"}),(0,f.jsxs)("span",{children:[e.album_name," (",e.media_count,")"]})]})})},s))):!z&&(0,f.jsxs)("p",{children:[`${Le("No_avalibale_media")}`,"."]}),z&&(H.length>0?H.map(((e,s)=>e.mediaItems.length>0?e.mediaItems.map(((a,t)=>(0,f.jsx)("div",{className:"col-md-3",children:(0,f.jsx)("div",{className:"d-flex flex-column gap-2",children:(0,f.jsx)("div",{className:"ggimagebox ofit",children:a.match(/\.(mp4|mov|avi|mkv|webm|ogg|flv|3gp|mkv|webm)$/i)?(0,f.jsxs)("video",{controls:!0,onClick:()=>Te(e.mediaItems,t),className:"hover-shadow",children:[(0,f.jsx)("source",{src:a,type:"video/mp4"}),`${Le("Your_browser_does")}`]}):(0,f.jsx)("img",{src:a,alt:"Media",onClick:()=>Te(e.mediaItems,t),className:"hover-shadow"})})})},`${s}-${t}`))):(0,f.jsxs)("p",{children:[`${Le("No_avalibale_media")}`,"."]}))):(0,f.jsxs)("p",{children:[`${Le("No_avalibale_media")}`,"."]}))]})})]})})})]})}),V&&(0,f.jsxs)("div",{id:"myModal",className:"modalgg",children:[(0,f.jsx)("span",{className:"close cursor",onClick:()=>X(!1),children:"\xd7"}),(0,f.jsxs)("div",{className:"modal-content",children:[Q.length>0?Q.map(((e,s)=>(0,f.jsxs)("div",{className:"mySlides",style:{display:Z===s?"block":"none"},children:[(0,f.jsxs)("div",{className:"numbertext",children:[s+1," / ",Q.length]}),e.match(/\.(jpeg|jpg|gif|png|webp|bmp|svg)$/i)?(0,f.jsx)("img",{src:e,alt:"img"}):e.match(/\.(mp4|mov|avi|mkv|webm|ogg|flv|3gp)$/i)?(0,f.jsxs)("video",{controls:!0,children:[(0,f.jsx)("source",{src:e,type:"video/mp4"}),Le("Your_browser_does")]}):null]},s))):(0,f.jsx)("p",{children:Le("Noresult")}),(0,f.jsx)("a",{className:"prev",onClick:()=>G((e=>0===e?Q.length-1:e-1)),children:"\u276e"}),(0,f.jsx)("a",{className:"next",onClick:()=>G((e=>e===Q.length-1?0:e+1)),children:"\u276f"})]})]}),(0,f.jsxs)(d.A,{show:ce,className:"edit_admin",onHide:Fe,children:[(0,f.jsx)(d.A.Header,{closeButton:!0,children:(0,f.jsx)(d.A.Title,{className:"textcolor",children:Le("Upload")})}),(0,f.jsx)(d.A.Body,{children:(0,f.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!je)return void alert("Please select images to upload.");q(!1),L(!0);const s=localStorage.getItem("userLogin"),a=s?JSON.parse(s):null,t=new FormData;console.log(je),je.forEach((e=>{t.append("images",e)})),t.append("id",U),t.append("user_id",a.id),t.append("fileType","");try{var l=(await u.A.post(Re+"uploadprivateAlbums",t,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}})).data;F(l.message),setTimeout((()=>{q(!0),L(!1),de(!1),ve(null),Ee(we),F("")}),3500)}catch(o){o.response||(o.request?console.error("Request data:",o.request):console.error("Error message:",o.message))}},children:[(0,f.jsx)("div",{className:"mb-3",children:(0,f.jsxs)("div",{className:"uploadfile rel bgload",children:[(0,f.jsx)("p",{className:"pb-2 text-dark",children:Le("select_one_more")}),(0,f.jsx)("input",{type:"file",name:"file",required:!0,accept:"image/*,video/*",multiple:!0,onChange:e=>{const s=e.target.files;let a=[],t="";s.length>10?t="You can only upload a maximum of 10 files.":Array.from(s).forEach((e=>{const s=e.type;s.startsWith("image/")||s.startsWith("video/")?e.size>52428800?t=`File "${e.name}" exceeds the 5 MB limit.`:a.push(e):t=`File "${e.name}" is not an image or video.`})),t?xe(t):(xe(""),ve(a))},className:"fileload",ref:Ue}),ge&&(0,f.jsx)("p",{style:{color:"red"},children:ge}),(0,f.jsx)("div",{className:"inload",style:{height:"50px"},children:(0,f.jsxs)("div",{className:"d-flex gap-3 align-items-center",children:[null!==je&&(0,f.jsx)(f.Fragment,{children:je.map(((e,s)=>(0,f.jsxs)("div",{className:"upimage rel",children:[(0,f.jsx)("button",{type:"button",className:"preremovBtn",onClick:()=>(e=>{ve((s=>{const a=s.filter(((s,a)=>a!==e));return 0===a.length&&Ue.current&&(Ue.current.value=""),a}))})(s),children:"X"}),(0,f.jsx)("div",{className:"inimag ofit",children:e.type.startsWith("image/")?(0,f.jsx)("img",{src:URL.createObjectURL(e),alt:e.name}):(0,f.jsx)("video",{width:"160",height:"120",controls:!0,children:(0,f.jsx)("source",{src:URL.createObjectURL(e),type:e.type})})})]},s)))}),(0,f.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,f.jsx)(l.Kh2,{style:{fontSize:"24px"}}),(0,f.jsxs)("h3",{className:"m-0 text-dark",style:{fontSize:"14px"},children:[Le("upload_image"),"/",Le("Videos")]})]})]})})]})}),(0,f.jsx)("span",{className:"text-success",children:J}),T&&(0,f.jsx)("div",{className:"spinner-border text-success send_load",role:"status",children:(0,f.jsxs)("span",{className:"visually-hidden",children:[Le("loading"),"..."]})}),(0,f.jsxs)(d.A.Footer,{children:[(0,f.jsx)(m.A,{variant:"secondary",onClick:Fe,children:Le("Close")}),(0,f.jsx)(m.A,{type:"submit",style:{background:"#6e75a8",opacity:$?1:.1,pointerEvents:$?"auto":"none"},className:"",children:Le("Upload")})]})]})})]}),(0,f.jsxs)(d.A,{show:R,className:"edit_admin",onHide:Fe,children:[(0,f.jsx)(d.A.Header,{closeButton:!0,children:(0,f.jsxs)(d.A.Title,{className:"textcolor",children:[" ",Le("Upload")]})}),(0,f.jsx)(d.A.Body,{children:(0,f.jsxs)("form",{onSubmit:async()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;let t={file:w,id:S,removeid:U,user_id:s.id};try{await u.A.post(Re+"movetoFile",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});_(""),E(!1),setTimeout((()=>{a(!0)}),80),b("Successfully moved"),Ee(we),setTimeout((()=>{a(!1)}),800)}catch(l){}},method:"post",action:"javascript:void(0)",children:[(0,f.jsxs)("div",{className:"row g-3",children:[" ",(0,f.jsxs)("div",{className:"col-md-12",children:[(0,f.jsxs)("label",{className:"stextlabel text-dark",children:[Le("AlbumNameFrom")," "]}),(0,f.jsx)("input",{type:"text",disabled:!0,name:"album_name",value:C,className:"form-control",required:!0})]}),(0,f.jsxs)("div",{className:"col-md-12",children:[(0,f.jsxs)("label",{className:"stextlabel text-dark",children:[Le("MOve_to")," *"]}),(0,f.jsxs)("select",{required:!0,className:"form-control",onChange:e=>{_(e.target.value)},name:"move_to",children:[(0,f.jsx)("option",{value:"",children:"--Select--"}),I.map(((e,s)=>(0,f.jsx)("option",{value:e.id,children:e.name},s)))]})]})]}),(0,f.jsx)("span",{className:"text-success",children:J}),T&&(0,f.jsx)("div",{className:"spinner-border text-success send_load",role:"status",children:(0,f.jsxs)("span",{className:"visually-hidden",children:[Le("loading"),"..."]})}),(0,f.jsxs)(d.A.Footer,{children:[(0,f.jsx)(m.A,{variant:"secondary",onClick:Fe,children:Le("Close")}),(0,f.jsx)(m.A,{type:"submit",style:{background:"#6e75a8"},className:"",children:Le("Move")})]})]})})]}),(0,f.jsx)(i.w,{}),(0,f.jsx)(j.E,{isOpen1:He,onClose1:()=>{We(!1),document.body.style.overflowY="auto"},PopupData:Pe,PopupDatafile:ze,UserPhotoCommetss:Ve,UserAlbumId:ye,getfavalbum:async()=>{const e=localStorage.getItem("userLogin");e&&JSON.parse(e);let s={file:Se,id:ye,user_id:Ne};console.log(s);try{const e=(await u.A.post(Re+"getuseralbumFile",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;!0===e.matched&&(Ke(e.results),De(Se),Qe(Se,ye),Ze())}catch(a){}},goToNext:()=>{if(Ce<te.length-1){const e=Ce+1,s=te[e];ke(e),Ge(s.id,s.url,e)}},goToPrevious:()=>{if(Ce>0){const e=Ce-1,s=te[e];ke(e),Ge(s.id,s.url,e)}},mediaImages:te,currentIndex:Ce,setCurrentIndex:ke,openModalLikeComment:Ge,refreshpost:()=>{window.location.reload()},getfavrefresh:async()=>{const e=localStorage.getItem("userLogin");e&&JSON.parse(e);let s={file:Se,id:ye,user_id:Ne};console.log(s);try{const e=(await u.A.post(Re+"getuseralbumFile",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;console.log(e),!0===e.matched&&(Ze(),Ke(e.results),De(Se),Qe(Se,ye))}catch(a){}}})]})}}}]);
//# sourceMappingURL=9980.f663108a.chunk.js.map