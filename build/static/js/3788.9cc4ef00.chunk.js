"use strict";(self.webpackChunkamourette=self.webpackChunkamourette||[]).push([[3788],{3788:(e,s,t)=>{t.r(s),t.d(s,{default:()=>N});var a=t(5043),o=t(5475),r=t(5700),n=t(8229),i=t(7035),l=t(6213),c=t(4117),d=t(2862),u=t(579);const p=e=>{let{refreshRight:s}=e;var r="https://backend.amourette.no/api/profile/";const[n,i]=(0,a.useState)("0"),[p,m]=(0,a.useState)("0"),[g,h]=(0,a.useState)("0"),[f,x]=(0,a.useState)("0"),[j,v]=(0,a.useState)("0"),[y,w]=(0,a.useState)("0"),[N,_]=(0,a.useState)("0"),[b,S]=(0,a.useState)([]),[k,A]=(0,a.useState)([]);(0,a.useEffect)((()=>{console.log("right",s),C(),I(),q()}),[s]),(0,a.useEffect)((()=>{C(),I(),q()}),[]);const C=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:JSON.parse(e).id};try{var t=(await l.A.post(r+"gettotalGroups",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;w(t.groupsCount)}catch(a){a.response||a.request}},I=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:JSON.parse(e).id};try{var t=(await l.A.post(r+"gettotalEvents",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;_(t.eventsCount)}catch(a){a.response||a.request}},q=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:JSON.parse(e).id};try{var t=(await l.A.post(r+"gettotalImages",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;v(t.imagesCount)}catch(a){a.response||a.request}};(0,a.useEffect)((()=>{T()}),[]);const T=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:JSON.parse(e).id};try{var t=(await l.A.post(r+"getvisitprofile",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.result;S(t)}catch(a){a.response||a.request}};(0,a.useEffect)((()=>{const e=setInterval((async()=>{E(),C(),I(),q(),D(),M()}),1500);return()=>clearInterval(e)}),[]);const E=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:JSON.parse(e).id};try{(await l.A.post(r+"gettotalOnline",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data}catch(t){t.response||t.request}};(0,a.useEffect)((()=>{M(),$()}),[]);const M=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:JSON.parse(e).id,looking_forr:[]};try{var t=(await l.A.post("https://backend.amourette.no/api/members/getAllMembersPage",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;if(console.log(t),t.length>0){const e=t.filter((e=>"Online"===e.online_user&&"Yes"===e.online_user_active)).length;i(e);const s=new Date,a=new Date(s.getTime()-864e5),o=new Date(s.getTime()-6048e5);t.length;let r=0,n=0;t.forEach((e=>{const s=new Date(e.created_at);s>=a&&r++,s>=o&&n++})),x(r)}m(t.length)}catch(a){a.response||a.request}},$=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:JSON.parse(e).id};try{var t=(await l.A.post(r+"gettotalMembers",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;console.log(t),h(t.memberCount)}catch(a){a.response||a.request}};(0,a.useEffect)((()=>{D()}),[]);const D=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:JSON.parse(e).id};try{(await l.A.post(r+"gettotalNewMembers",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.last7Days}catch(t){t.response||t.request}},L=e=>{if(!e)return null;const s=new Date(e);if(isNaN(s.getTime()))return console.error("Invalid date:",e),"Invalid date";const t=new Date,a=new Date(s.getTime()-36e5),o=new Intl.DateTimeFormat("en-GB",{timeZone:"Europe/Oslo",hour:"2-digit",minute:"2-digit",hour12:!1}).format(a),r=t.getTime()-s.getTime(),n=Math.floor(r/1e3),i=Math.floor(n/60),l=Math.floor(i/60),c=Math.floor(l/24),d=Math.floor(c/7),u=Math.floor(c/30),p=Math.floor(c/365);return i<60||l<24?`${o}`:1===c?`Yesterday at ${o}`:c<7?`${c}d  ${o}`:d<4?`${d}w  ${o}`:u<12?`${u}m  ${o}`:`${p}y  ${o}`},{t:R}=(0,c.Bd)();return(0,a.useEffect)((()=>{const e=localStorage.getItem("language")||"en";d.A.language!==e&&d.A.changeLanguage(e)}),[d.A,R]),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"d-flex flex-column leftbar",children:[(0,u.jsxs)("div",{className:"d-flex flex-column  visitedlast",children:[(0,u.jsx)("h5",{className:"grouptitle mb-3",children:R("RightMenu_LastVisited")}),(0,u.jsx)("div",{className:"d-flex flex-column gap-3 scroll_bar visitscroll",children:0===b.length?(0,u.jsxs)("p",{children:[R("RightMenu_NovisitFound"),"."]}):b.map(((e,s)=>(0,u.jsxs)(o.N_,{to:`/friend/${e.uid}`,className:"d-flex gap-3 align-items-center listoficons",children:[(0,u.jsx)("div",{className:"flex-shrink-0",children:(0,u.jsx)("div",{className:"userpic ofit rounded-circle overflow-hidden",children:(0,u.jsx)("img",{src:e.profile_image?e.profile_image:t(7123),alt:"userpic"})})}),(0,u.jsxs)("div",{className:"flex-grow-1",children:[(0,u.jsxs)("h4",{children:[(0,u.jsx)("strong",{children:e.username})," "]}),(0,u.jsx)("h6",{children:L(e.date)})]})]},s)))})]}),(0,u.jsx)("hr",{className:"linehr"}),(0,u.jsxs)("div",{className:"d-flex flex-column gap-2",children:[(0,u.jsx)("h5",{className:"grouptitle mb-3",children:R("RightMenu_Statistics")}),(0,u.jsxs)("div",{className:"d-flex flex-column gap-3 listnumber",children:[(0,u.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,u.jsx)("h4",{children:R("RightMenu_Onlinenow")}),(0,u.jsx)("h4",{children:n})]}),(0,u.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,u.jsx)("h4",{children:R("RightMenu_Newmembers")}),(0,u.jsx)("h4",{children:f})]}),(0,u.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,u.jsx)("h4",{children:R("RightMenu_Images")}),(0,u.jsx)("h4",{children:j})]}),(0,u.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,u.jsx)("h4",{children:R("RightMenu_Groups")}),(0,u.jsx)("h4",{children:y})]}),(0,u.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,u.jsx)("h4",{children:R("RightMenu_Eventsandparties")}),(0,u.jsx)("h4",{children:N})]}),(0,u.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,u.jsx)("h4",{children:R("RightMenu_Membersintotal")}),(0,u.jsx)("h4",{children:p})]}),(0,u.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,u.jsx)("h4",{children:R("Users")}),(0,u.jsx)("h4",{children:g})]})]})]})]})})};const m=function(e){let{refresh:s}=e;const[r,n]=(0,a.useState)([]),[c,d]=(0,a.useState)([]);(0,a.useEffect)((()=>{(async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id};try{const e=(await l.A.post("https://backend.amourette.no/api/members/getAllfriends",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results.map((e=>e.id));n(e);await p(e)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}})()}),[s,c]);const p=async e=>{const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;let a={user_ids:[...e,t.id].join(", "),user_id:t.id};try{var o=(await l.A.post("https://backend.amourette.no/api/notifications/getnotificationsdashboard",a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;d(o)}catch(r){r.response||(r.request?console.error("Request data:",r.request):console.error("Error message:",r.message))}},m=e=>{if(!e)return null;const s=new Date(e);if(isNaN(s.getTime()))return console.error("Invalid date:",e),"Invalid date";const t=new Date,a=new Date(s.getTime()-36e5),o=new Intl.DateTimeFormat("en-GB",{timeZone:"Europe/Oslo",hour:"2-digit",minute:"2-digit",hour12:!1}).format(a),r=t.getTime()-s.getTime(),n=Math.floor(r/1e3),i=Math.floor(n/60),l=Math.floor(i/60),c=Math.floor(l/24),d=Math.floor(c/7),u=Math.floor(c/30),p=Math.floor(c/365);return i<60||l<24?`${o}`:1===c?`Yesterday at ${o}`:c<7?`${c}d  ${o}`:d<4?`${d}w  ${o}`:u<12?`${u}m  ${o}`:`${p}y  ${o}`};return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"d-flex flex-column gap-4 ",children:(0,u.jsx)("div",{className:"d-flex flex-column gap-3",children:0===c.length?(0,u.jsx)("p",{}):(0,u.jsx)("div",{className:"d-flex flex-column gap-3",children:c.map(((e,s)=>(0,u.jsx)("div",{className:"postblock d-flex flex-column rounded-4 overflow-hidden h-100",children:(0,u.jsx)("div",{className:"d-flex justify-content-between align-items-center h-100 px-3 py-1",children:(0,u.jsx)("div",{className:"flex-grow-1",children:(0,u.jsxs)(o.N_,{to:e.link_href&&""!==e.link_href.trim()?`${e.link_href}`:"#",className:"d-flex gap-2 align-items-center",children:[(0,u.jsx)("div",{className:"flex-shrink-0",children:(0,u.jsx)("div",{className:"urpic ofit rounded-circle overflow-hidden",children:(0,u.jsx)("img",{src:"Admin"===e.status?t(7123):e.recipient_profile_image||i,alt:"userpic"})})}),(0,u.jsxs)("div",{className:"flex-grow-1",children:[(0,u.jsxs)("h4",{children:["User"===e.status&&(0,u.jsxs)("strong",{children:[e.recipient_name," "]}),"Admin"===e.status&&(0,u.jsx)("strong",{children:"Admin "}),e.message]}),(0,u.jsx)("h5",{children:m(e.date)})]})]})})})})))})})})})};var g=t(686),h=t(3216),f=t(9564),x=t(2074),j=t(184),v=t(4258),y=t(793);const w=e=>{let{isOpen1:s,onClose1:r,children:n,seperateGallerydetail:i,UserDetail:p,LoginData:m,getUserfav:g,GalleryCommets:h,getCommentPost:w,GalleryIdDetailGet:N,galleryData:_,previousId:b,nextId:S,getgallerydetialnext:k,getgallerydetialprev:A,postType:C,postdetail:I,refreshdiv:q}=e;const[T,E]=(0,a.useState)(""),[M,$]=(0,a.useState)(!1),[D,L]=(0,a.useState)(!1),[R,J]=(0,a.useState)(""),O=(0,a.useRef)(null),[G,P]=(0,a.useState)(0),[F,Y]=(0,a.useState)(i),[B,U]=(0,a.useState)(N),[W,V]=(0,a.useState)(!1),[Z,z]=(0,a.useState)(h),{t:H}=(0,c.Bd)(),[K,Q]=(0,a.useState)(""),X=(0,a.useRef)(null),[ee,se]=(0,a.useState)(!1),te=localStorage.getItem("userLogin"),ae=te?JSON.parse(te):null;(0,a.useEffect)((()=>{const e=localStorage.getItem("language")||"en";console.log("language"),console.log(e),d.A.language!==e&&d.A.changeLanguage(e)}),[d.A,H]),(0,a.useEffect)((()=>{z(h),Y(i),U(N),O.current&&O.current.scrollIntoView()}),[h,i,N]),(0,a.useEffect)((()=>{const e=new WebSocket("wss://backend.amourette.no");return e.onmessage=e=>{try{const s=JSON.parse(e.data);let t="";console.log(C),"group"===C?t=String(s.post_id):"gallery"===C?t=String(s.gallery_id):"forum"===C&&(t=String(s.forum_id));const a=String(N),o=m.id;console.log(a,t),console.log(s),a===t&&("GalleryLike"===s.event&&(console.log(s),Y((e=>e.id===s.gallery_id?{...e,total_favourites:s.total_favourites,user_favourited:o===s.user_id?s.user_favourited:e.user_favourited}:e))),"GalleryPost"===s.event&&z((e=>[...e,{user_id:s.user_id,username:s.username,description:s.message,profile_image:s.profile_image,makeImagePrivate:s.makeImagePrivate,date:s.date,lastInsertId:s.lastInsertId}])),"groupComments"===s.event&&(console.log("uuhhh"),z((e=>[...e,{user_id:s.post.user_id,username:s.post.comment_user_username,description:s.post.description,profile_image:s.post.comment_user_profile_image,makeImagePrivate:0,date:s.post.comment_date,lastInsertId:""}]))),"ForumComments"===s.event&&z((e=>[...e,{user_id:s.user_id,username:s.username,description:s.description,profile_image:s.profile_image,makeImagePrivate:s.makeImagePrivate,date:s.date,lastInsertId:s.lastInsertId}])))}catch(s){console.error("Failed to parse WebSocket message:",s),console.error("Raw message:",e.data)}},()=>{e.close()}}),[m,N]);var oe="https://backend.amourette.no/api/members/";const[re,ne]=(0,a.useState)(""),[ie,le]=(0,a.useState)(!1),ce=e=>{if(!e)return null;const s=new Date(e);if(isNaN(s.getTime()))return console.error("Invalid date:",e),"Invalid date";const t=new Date,a=new Date(s.getTime()-36e5),o=new Intl.DateTimeFormat("en-GB",{timeZone:"Europe/Oslo",hour:"2-digit",minute:"2-digit",hour12:!1}).format(a),r=t.getTime()-s.getTime(),n=Math.floor(r/1e3),i=Math.floor(n/60),l=Math.floor(i/60),c=Math.floor(l/24),d=Math.floor(c/7),u=Math.floor(c/30),p=Math.floor(c/365);return i<60||l<24?`${o}`:1===c?`Yesterday at ${o}`:c<7?`${c}d  ${o}`:d<4?`${d}w  ${o}`:u<12?`${u}m  ${o}`:`${p}y  ${o}`};(0,a.useEffect)((()=>{const e=e=>{"ArrowRight"===e.key?k():"ArrowLeft"===e.key&&A()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[k,A]);const de=!re.trim()||W,ue=["arse","arsehead","arsehole","ass","ass hole","asshole","bastard","bitch","bloody","bollocks","brotherfucker","bugger","bullshit","child-fucker","Christ on a bike","Christ on a cracker","cock","cocksucker","crap","cunt","dammit","damn","damned","damn it","dick","dick-head","dickhead","dumb ass","dumb-ass","dumbass","dyke","faggot","father-fucker","fatherfucker","fuck","fucker","fucking","god dammit","goddammit","God damn","god damn","goddamn","Goddamn","goddamned","goddamnit","godsdamn","holy shit","horseshit","in shit","jackarse","jack-ass","jackass","Jesus Christ","Jesus fuck","Jesus Harold Christ","Jesus H. Christ","Jesus, Mary and Joseph","Jesus wept","kike","mother fucker","mother-fucker","motherfucker","nigga","nigra","pigfucker","piss","prick","pussy","shit","shit ass","shite","sibling fucker","sisterfuck","sisterfucker","slut","son of a bitch","son of a whore","spastic","sweet Jesus","twat","wanker"],pe=async e=>{if(e.preventDefault&&e.preventDefault(),console.log(C),le(!0),"forum"===C){let t={description:e.description||e.target.description.value,forum_id:e.gallery_id||e.target.gallery_id.value,user_id:m.id,postType:C};try{await l.A.post(oe+"forumscommentSaveDashboard",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});le(!1),ne(""),w(),O.current.scrollIntoView({behavior:"smooth"})}catch(s){s.response||(s.request?console.error("Request data:",s.request):console.error("Error message:",s.message))}}if("group"===C){const t="https://backend.amourette.no/api/groups/";let a={comment:e.description||e.target.description.value,post_id:e.gallery_id||e.target.gallery_id.value,user_id:m.id,postType:C};try{await l.A.post(t+"CreateGroupPostCommentDashboard",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});le(!1),ne(""),w(),O.current.scrollIntoView({behavior:"smooth"})}catch(s){s.response||(s.request?console.error("Request data:",s.request):console.error("Error message:",s.message))}}if("gallery"===C){let t={description:e.description||e.target.description.value,gallery_id:e.gallery_id||e.target.gallery_id.value,user_id:m.id,postType:C};try{await l.A.post(oe+"GalleryPostSave",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});le(!1),ne(""),w(),O.current.scrollIntoView({behavior:"smooth"})}catch(s){s.response||(s.request?console.error("Request data:",s.request):console.error("Error message:",s.message))}}},[me,ge]=(0,a.useState)(!1);(0,a.useEffect)((()=>{const e=e=>{"Escape"===e.key&&r()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[r]);if(!s)return null;const he=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id,id:i.id,post_type:C};try{await l.A.post(oe+"deletePostDashboard",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});$(!0),E("Post deleted successfully"),L(!1),q(),setTimeout((()=>{r(),$(!1)}),1e3)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}};return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"popup-overlay",onClick:e=>{e.target.classList.contains("popup-overlay")&&r()},children:[(0,u.jsx)(f.M,{isOpen1:D,onClose1:()=>{L(!1)},message:R,onReturnSent:async()=>{he()}}),M&&(0,u.jsx)(y.A,{message:T}),(0,u.jsxs)("div",{className:"popup-content col-md-10",children:[(0,u.jsx)("button",{className:"close-button",style:{zIndex:"999"},onClick:r,children:"\xd7 "}),(0,u.jsxs)("div",{className:"usergallery_pop  d-flex flex-column gap-1 h-100",children:[(0,u.jsx)("button",{className:"arrow right",type:"button",onClick:k,children:(0,u.jsx)(j.X6T,{})}),(0,u.jsx)("button",{className:"arrow left",type:"button",onClick:A,children:(0,u.jsx)(j._Jj,{})}),(0,u.jsxs)("div",{className:"row p-4",children:[(0,u.jsx)("div",{className:"col-lg-7",children:(0,u.jsxs)("div",{className:"position-relative",children:[(0,u.jsx)("div",{className:"d-block gallery_im1g ",children:F.image&&"string"===typeof F.image?(0,u.jsx)(x.A,{className:"w-100 h-100",url:F.image}):(0,u.jsx)("p",{children:H("No_avalibale_media")})}),ae.id===F.user_id&&(0,u.jsx)("div",{className:"flex-shrink-0 posttopbtns",children:(0,u.jsx)("button",{title:"Delete",onClick:()=>{L(!0),J("Are you sure? You want to delete this post")},type:"button",className:"btn redbtn",style:{padding:"0px 0px",textAlign:"center",minWidth:"0px",background:"red",width:"40px",height:"40px",borderRadius:"50px",position:"absolute",top:"10px",right:"15px"},children:(0,u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler textcolor icons-tabler-outline icon-tabler-trash",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M4 7l16 0"}),(0,u.jsx)("path",{d:"M10 11l0 6"}),(0,u.jsx)("path",{d:"M14 11l0 6"}),(0,u.jsx)("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),(0,u.jsx)("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"})]})})})]})}),(0,u.jsx)("div",{className:"col-lg-5",children:(0,u.jsxs)("div",{className:"d-flex h-100 flex-column justify-content-between gap-1",children:[(0,u.jsxs)("div",{className:"d-flex flex-column gap-1 p-3 bordr-bt",children:[(0,u.jsxs)("div",{className:"d-flex align-items-center gap-3 justify-content-between",children:[(0,u.jsx)(o.N_,{to:`/friend/${F.uid}`,children:F.username}),(0,u.jsx)("h6",{children:ce(F.date)})]}),(0,u.jsxs)("div",{className:"d-flex align-items-center gap-3 justify-content-between",children:[(0,u.jsx)("p",{children:F&&F.description&&F.description.length>150?F.description.substring(0,150)+"...":(null===F||void 0===F?void 0:F.description)||"No description available"}),(0,u.jsxs)("div",{className:"d-flex align-items-center gap-3 flex-shrink-0",children:[(0,u.jsxs)("div",{className:"d-flex align-items-center gap-1 flex-shrink-0",children:[(0,u.jsx)("button",{type:"button",onClick:()=>(async(e,s)=>{let t={user_id:m.id,id:e,pertype:s};if(console.log(t),se(!0),"gallery"===s)try{await l.A.post(oe+"galleryPostLike",t,{headers:{Accept:"application/json","Content-Type":"application/json"}}),se(!1),g("")}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}if("forum"===s){const s=localStorage.getItem("userLogin");let t={user_id:(s?JSON.parse(s):null).id,id:e};try{await l.A.post(oe+"forumlikepostforumpage",t,{headers:{Accept:"application/json","Content-Type":"application/json"}}),g("")}catch(a){a.response?console.error("Response error:",a.response.data):a.request?console.error("Request data:",a.request):console.error("Error message:",a.message)}}if("group"===s){const s=localStorage.getItem("userLogin");let t={user_id:(s?JSON.parse(s):null).id,id:e};try{await l.A.post(oe+"grouplikepostgrouppage",t,{headers:{Accept:"application/json","Content-Type":"application/json"}}),g("")}catch(a){a.response?console.error("Response error:",a.response.data):a.request?console.error("Request data:",a.request):console.error("Error message:",a.message)}}})(F.id,F.pertype),className:"liked  fulw j",children:F.total_favourites?(0,u.jsx)(j.Mbv,{}):(0,u.jsx)(j.sOK,{})}),(0,u.jsx)("p",{className:"likecount",children:F.total_favourites})]}),(0,u.jsxs)("div",{className:"d-flex align-items-center gap-1 flex-shrink-0",children:[(0,u.jsx)("div",{className:"d-block like_icon",children:(0,u.jsx)("img",{className:"w-100 h-100",src:t(2100),alt:"img"})}),(0,u.jsx)("p",{className:"likecount",children:Z.length})]})]})]})]}),(0,u.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,u.jsxs)("ul",{className:"usergallery_msg scroll_bar",children:[0===Z.length?(0,u.jsx)("li",{children:H("Nocommentsavailable")}):Z.map(((e,s)=>(0,u.jsxs)("li",{className:"gap-3",children:[(0,u.jsx)("div",{className:"profile_img",children:(0,u.jsx)("img",{className:"w-100 h-100",src:1===e.makeImagePrivate?t(7123):e.profile_image?e.profile_image:t(3141),alt:"img"})}),(0,u.jsxs)("div",{className:"comment_text d-flex flex-column gap-1",children:[(0,u.jsx)("h6",{children:e.username})," ",(0,u.jsx)("p",{children:e.description})," "]}),(0,u.jsx)("p",{children:ce(e.date)})," "]},s))),(0,u.jsx)("li",{ref:O})]}),(0,u.jsxs)("form",{action:"javascript:void(0)",method:"post",onSubmit:pe,children:[W&&(0,u.jsx)("span",{className:"text-danger",style:{fontSize:"14px"},children:H("Your_message_contain")}),(0,u.jsx)("div",{className:"d-flex align-items-center gap-3 w-100 usergallery_from",children:(0,u.jsxs)("div",{className:"comment_input w-100 d-flex align-items-center gap-1",children:[ie&&(0,u.jsx)("div",{className:"spinner-border text-success postloader",role:"status",children:(0,u.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,u.jsx)("input",{type:"hidden",value:i.id,name:"gallery_id"}),(0,u.jsxs)("div",{className:"emoji-container",children:[(0,u.jsx)("button",{type:"button",className:"emoji-button",onClick:()=>ge(!me),children:"\ud83d\ude00"}),me&&(0,u.jsx)("div",{className:"emoji-picker",style:{position:"absolute",top:"64px"},children:(0,u.jsx)(v.Ay,{onEmojiClick:e=>{ne((s=>s+e.emoji)),ge(!1),X.current&&X.current.focus()}})})]}),(0,u.jsx)("input",{type:"text",required:!0,ref:X,name:"description",value:re,onChange:e=>{const s=e.target.value;ne(s),""===s.trim()&&ne("");const t=ue.some((e=>s.toLowerCase().includes(e.toLowerCase())));V(t)},onKeyDown:e=>{"Enter"===e.key&&""!==re.trim()&&(e.preventDefault(),pe({description:re,gallery_id:i.id}))},placeholder:`${H("write_a_comment")}`}),(0,u.jsx)("button",{type:"submit",disabled:de,style:{opacity:de?.5:1},className:"comment_postbtn",children:H("Post")})]})})]})]})]})})]})]})]})]})})};const N=function(){var e,s;const t=(0,a.useRef)(null),i=(0,a.useRef)(null),[d,j]=((0,h.Zp)(),(0,a.useState)("")),[v,N]=(0,a.useState)(!1),[_,b]=(0,a.useState)(""),[S,k]=(0,a.useState)(""),[A,C]=(0,a.useState)(!0),[I,q]=(0,a.useState)(!1),[T,E]=(0,a.useState)([]),[M,$]=(0,a.useState)(!1),[D,L]=(0,a.useState)([]),[R,J]=(0,a.useState)(""),[O,G]=(0,a.useState)(""),[P,F]=(0,a.useState)(!1),[Y,B]=(0,a.useState)(""),[U,W]=(0,a.useState)(""),[V,Z]=(0,a.useState)(""),[z,H]=(0,a.useState)([]),[K,Q]=(0,a.useState)(""),[X,ee]=(0,a.useState)(""),[se,te]=(0,a.useState)(0),[ae,oe]=(0,a.useState)(!0),[re,ne]=(0,a.useState)(!1),[ie,le]=(0,a.useState)(""),[ce,de]=(0,a.useState)(""),[ue,pe]=(0,a.useState)(null),[me,ge]=(0,a.useState)({index:0,type:""});var he="https://backend.amourette.no/api/members/";const{t:fe,i18n:xe}=(0,c.Bd)(),je=localStorage.getItem("userLogin"),ve=je?JSON.parse(je):null;(0,a.useEffect)((()=>{const e=new WebSocket("wss://backend.amourette.no");return e.onmessage=e=>{try{const s=JSON.parse(e.data),t=localStorage.getItem("userLogin"),a=t?JSON.parse(t):null;"Deletegallery"===s.event&&Ie(D),"sendfriendRequest"===s.event&&s.user_id===a.id&&A(),"friendrequestacceptnotification"===s.event&&Array.isArray(s.user_id)&&s.user_id.some((e=>e.id===a.id))&&A(),"adminNotification"===s.event&&Array.isArray(s.user_id)&&s.user_id.includes(a.id)&&(console.log("New notification received for this user:",s.message),A()),"adminEventupdate"===s.event&&Array.isArray(s.user_id)&&s.user_id.includes(a.id)&&(console.log("New notification received for this user update event:",s.message),A()),"adminEventdelete"===s.event&&Array.isArray(s.user_id)&&s.user_id.includes(a.id)&&(console.log("New notification delete event:",s.message),A()),"adminEventPostdelete"===s.event&&Array.isArray(s.user_id)&&s.user_id.includes(a.id)&&(console.log("New notification delete event:",s.message),A()),"adminEventPostCommentEdit"===s.event&&Array.isArray(s.user_id)&&s.user_id.includes(a.id)&&(console.log("New notification delete event:",s.message),A()),"adminGalleryPostUpdate"===s.event&&Array.isArray(s.user_id)&&s.user_id.includes(a.id)&&(console.log("New notification delete event:",s.message),A()),"gallerynotification"===s.event&&Array.isArray(s.user_id)&&s.user_id.some((e=>e.id===a.id))&&(Ce(),C(!0),A())}catch(s){}},e.onopen=()=>{console.log("WebSocket connection established")},e.onerror=e=>{console.error("WebSocket error:",e)},()=>{e.close(),console.log("WebSocket connection closed")}}),[A]),(0,a.useEffect)((()=>{const e=localStorage.getItem("language")||"en";xe.language!==e&&xe.changeLanguage(e)}),[xe,fe]),(0,a.useEffect)((()=>{const e=localStorage.getItem("userLogin");null===JSON.parse(e)&&(window.location.href="/login")}),[]),(0,a.useEffect)((()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;J(s),ye()}),[]);const ye=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id};try{const e=await l.A.post(he+"getUserDetail",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(e.data.row.length>0){var t=e.data.row[0];W(t)}}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}},[we,Ne]=(0,a.useState)(!1),[_e,be]=(0,a.useState)(null),Se=e=>{be(_e===e?null:e)},ke=()=>{be(!1)},Ae=async(e,s)=>{de(s),G(e),q(!0),j("Are you sure? You want to delete this post")};(0,a.useEffect)((()=>{Ce()}),[]);const Ce=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id};try{const e=(await l.A.post(he+"getAllfriends",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results.map((e=>e.id));L(e);await Ie(e)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}},Ie=async e=>{const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;let a={user_ids:[...e,t.id].join(", "),user_id:t.id,offset:0};console.log(a);try{var o=(await l.A.post(he+"getdashboardpost",a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;console.log(o),E(o)}catch(r){r.response||(r.request?console.error("Request data:",r.request):console.error("Error message:",r.message))}},qe=e=>{if(!e)return null;const s=new Date(e);if(isNaN(s.getTime()))return console.error("Invalid date:",e),"Invalid date";const t=new Date,a=new Date(s.getTime()-36e5),o=new Intl.DateTimeFormat("en-GB",{timeZone:"Europe/Oslo",hour:"2-digit",minute:"2-digit",hour12:!1}).format(a),r=t.getTime()-s.getTime(),n=Math.floor(r/1e3),i=Math.floor(n/60),l=Math.floor(i/60),c=Math.floor(l/24),d=Math.floor(c/7),u=Math.floor(c/30),p=Math.floor(c/365);return i<60||l<24?`${o}`:1===c?`Yesterday at ${o}`:c<7?`${c}d  ${o}`:d<4?`${d}w  ${o}`:u<12?`${u}m  ${o}`:`${p}y  ${o}`},Te=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id,id:O,post_type:ce};if(""!==ce)try{await l.A.post(he+"deletePostDashboard",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});N(!0),k("Post deleted successfully"),Ie(D),q(!1),be(null),setTimeout((()=>{N(!1)}),1e3)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}},Ee=async function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Z(e),Me(e,s),ge({index:t,type:s}),le(t),de(s);let a={id:e,user_id:R.id,post_type:s};console.log(a);try{const e=await l.A.post(he+"getGalleryGroupforumDetail",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(console.log(e.data.row[0]),e.data.row.length>0){var o=e.data.row[0];Le(),B(o),pe(t),B(T[t])}}catch(r){r.response||(r.request?console.error("Request data:",r.request):console.error("Error message:",r.message))}},Me=async(e,s)=>{let t={id:e,user_id:R.id,post_type:s};try{var a=(await l.A.post(he+"getGalleryCommentsDashboard",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;H(a)}catch(o){o.response||(o.request?console.error("Request data:",o.request):console.error("Error message:",o.message))}},[$e,De]=(0,a.useState)(!1),Le=()=>{De(!0),document.body.style.overflowY="hidden"};return(0,a.useEffect)((()=>{if(T.length>0&&T[ue]){const e=T[ue];console.log(ce),console.log(ue),console.log(e.id)}}),[ue]),(0,a.useEffect)((()=>{const e=new IntersectionObserver((e=>{e[0].isIntersecting&&ae&&!re&&(console.log(se),(async e=>{const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;let a={user_ids:[...D,t.id].join(", "),user_id:t.id,offset:e};console.log("Fetching with offset:",e);try{const e=(await l.A.post(he+"getdashboardpost",a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;E((s=>{const t=new Set(s.map((e=>e.id))),a=e.filter((e=>!t.has(e.id)));return a.length>0?te((e=>e+a.length)):oe(!1),[...s,...a]}))}catch(o){o.response?console.error("Server error:",o.response.data):o.request?console.error("No response:",o.request):console.error("Error message:",o.message)}})(se))}),{threshold:1});return i.current&&e.observe(i.current),()=>{i.current&&e.unobserve(i.current)}}),[se,ae,re]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(r.A,{refreshNotifications:A}),(0,u.jsx)(f.M,{isOpen1:I,onClose1:()=>{q(!1)},message:d,onReturnSent:async()=>{Te()}}),v&&(0,u.jsx)(y.A,{message:S}),(0,u.jsx)("section",{className:"dashbox d-block",children:(0,u.jsx)("div",{className:"container-lg",children:(0,u.jsxs)("div",{className:"row justify-content-between",children:[(0,u.jsx)("div",{className:"col-lg-3 col-xl-3 sidefixedbox sticky-top scroll_bar",children:(0,u.jsx)(n.S,{})}),(0,u.jsx)("div",{className:"col-lg-5 col-xl-6 pt-3 z-index_9989",children:(0,u.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,u.jsx)("h1",{className:"grouptitle mb-1",children:fe("Friends_activity")}),0===T.length?(0,u.jsx)("div",{className:"postblock d-flex flex-column rounded-4 overflow-hidden h-100 p-2",children:(0,u.jsx)("h2",{children:fe("No_activity")})}):(0,u.jsxs)("div",{className:"postblock d-flex flex-column rounded-4 overflow-hidden",children:[(0,u.jsxs)("div",{className:"d-flex justify-content-between align-items-center px-3 py-1",children:[(0,u.jsx)("div",{className:"flex-grow-1",children:(0,u.jsxs)(o.N_,{to:"javascript:void(0)",className:"d-flex gap-2 align-items-center",children:[(0,u.jsx)("div",{className:"flex-shrink-0",children:(0,u.jsx)("div",{className:"urpic ofit rounded-circle overflow-hidden ssd",children:T&&T[0]?T[0].uimage.match(/\.(jpeg|jpg|gif|png|webp|bmp|svg)$/i)?(0,u.jsx)("img",{src:T[0].uimage,alt:"img s"}):T[0].uimage.match(/\.(mp4|mov|avi|mkv|webm|ogg|flv|3gp)$/i)?(0,u.jsxs)("video",{controls:!0,alt:"video",children:[(0,u.jsx)("source",{src:T[0].uimage,type:"video/mp4"}),fe("Your_browser_does")]}):null:(0,u.jsx)("p",{})})}),(0,u.jsxs)("div",{className:"flex-grow-1",children:["Just now"===qe(T[0].date)?(0,u.jsxs)(o.N_,{to:`/friend/${T[0].user_id}`,children:[T[0].username," ",fe("Just_post")]}):(0,u.jsx)(o.N_,{to:`/friend/${T[0].user_id}`,children:T[0].username}),(0,u.jsxs)("h5",{children:[qe(T[0].date)," "]})]})]})}),ve.id===T[0].user_id&&(0,u.jsxs)("div",{className:"flex-shrink-0 position-relative",children:[(0,u.jsx)("button",{type:"button",onClick:()=>{Ne(!we)},className:"btnoption",children:(0,u.jsx)(g.aQx,{})}),we&&(0,u.jsxs)("ul",{className:"popup-menu",children:[(0,u.jsx)("li",{onClick:()=>Ae(T[0].id,T[0].pertype),children:fe("Delete")}),(0,u.jsx)("li",{onClick:()=>{Ne(!1)},children:"Cancel"})]})]})]}),(0,u.jsx)(o.N_,{onClick:()=>Ee(T[0].id,T[0].pertype,0),to:"javascript:void(0)",className:"imgblock ofit rounded-3 overflow-hidden mt-2",children:(0,u.jsx)(x.A,{className:"w-100 h-100",url:T[0].image})})]},0),(0,u.jsx)(m,{refresh:A}),(0,u.jsxs)("div",{className:"d-flex flex-column gap-3",ref:t,children:[0===T.length?(0,u.jsx)("h2",{}):T.slice(1).map(((e,s)=>{const t=qe(e.date);return(0,u.jsxs)("div",{className:"postblock d-flex flex-column rounded-4 h-100 overflow-hidden ",children:[(0,u.jsxs)("div",{className:"d-flex justify-content-between align-items-center h-100 px-3 py-1",children:[(0,u.jsx)("div",{className:"flex-grow-1",children:(0,u.jsxs)(o.N_,{to:"javascript:void(0)",className:"d-flex gap-2 align-items-center",children:[(0,u.jsx)("div",{className:"flex-shrink-0",children:(0,u.jsx)("div",{className:"urpic ofit rounded-circle overflow-hidden",children:(0,u.jsx)("img",{src:e.uimage,alt:"userpic"})})}),(0,u.jsxs)("div",{className:"flex-grow-1",children:["Just now"===t?(0,u.jsxs)(o.N_,{to:`/friend/${e.user_id}`,children:[e.username," ",fe("Justpostedanewphoto")]}):(0,u.jsx)(o.N_,{to:`/friend/${e.user_id}`,children:e.username}),(0,u.jsx)("h5",{children:t})]})]})}),ve.id===e.user_id&&(0,u.jsxs)("div",{className:"flex-shrink-0 position-relative",children:[(0,u.jsx)("button",{type:"button",onClick:()=>Se(s),onTouchStart:()=>Se(s),className:"btnoption",children:(0,u.jsx)(g.aQx,{})}),_e===s&&(0,u.jsxs)("ul",{className:"popup-menu",children:[(0,u.jsx)("li",{onClick:()=>Ae(e.id,e.pertype),onTouchStart:()=>Ae(e.id,e.pertype),children:fe("Delete")}),(0,u.jsx)("li",{onTouchStart:ke,onClick:ke,children:fe("Cancel")})]})]})]}),(0,u.jsx)(o.N_,{onTouchStart:()=>Ee(e.id,e.pertype,s+1),onClick:()=>Ee(e.id,e.pertype,s+1),to:"javascript:void(0)",className:"imgblock ofit rounded-3 overflow-hidden mt-2",children:(0,u.jsx)(x.A,{className:"w-100 h-100",url:e.image})})]},s)})),(0,u.jsx)("div",{ref:i})]})]})}),(0,u.jsx)("div",{className:"col-lg-3 col-xl-3 sidefixedbox sticky-top scroll_bar d-none d-lg-block",children:(0,u.jsx)(p,{refreshRight:M})})]})})}),(0,u.jsx)(w,{isOpen1:$e,onClose1:()=>{De(!1),document.body.style.overflowY="auto"},seperateGallerydetail:Y,UserDetail:U,LoginData:R,getUserfav:async()=>{Ee(V,me.type,me.index);let e={id:V,type:me.type};console.log(e);try{const t=await l.A.post(he+"getGallerlikedislike",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(t.data.results.length>0){var s;const e=null===(s=t.data.results)||void 0===s?void 0:s[0];E((s=>s.map((s=>s.id===e.id?e:s))))}}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}},GalleryCommets:z,getCommentPost:async()=>{let e={id:V,type:me.type};console.log(e,"kk");try{const t=await l.A.post(he+"getGallerforumgroupcomment",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(t.data.results.length>0){var s;const e=null===(s=t.data.results)||void 0===s?void 0:s[0];E((s=>s.map((s=>s.id===e.id?e:s))))}}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}},GalleryIdDetailGet:V,previousId:null===(e=T[ue-1])||void 0===e?void 0:e.id,nextId:null===(s=T[ue+1])||void 0===s?void 0:s.id,getgallerydetialnext:()=>{if(ue<T.length-1){const e=ue+1,s=T[e];Ee(s.id,s.pertype,e)}},getgallerydetialprev:()=>{if(ue>0){pe(ue-1);const e=ue-1,s=T[e];Ee(s.id,s.pertype,e)}},postType:ce,postdetail:T,refreshdiv:()=>{Ie(D)}})]})}}}]);
//# sourceMappingURL=3788.9cc4ef00.chunk.js.map