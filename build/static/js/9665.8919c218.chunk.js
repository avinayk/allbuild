"use strict";(self.webpackChunkamourette=self.webpackChunkamourette||[]).push([[9665],{9665:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var r=t(5043),a=t(5475),l=t(5700),o=t(4117),n=t(2862),i=t(6213),c=t(9853),d=t.n(c),u=t(4295),g=t(579);const m=function(){var e="https://backend.amourette.no/api/members/";const[s,c]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),[h,x]=(0,r.useState)([]),[f,j]=(0,r.useState)([]),[v,N]=(0,r.useState)([]),[w,y]=(0,r.useState)(!1),[_,b]=(0,r.useState)(null);(0,r.useEffect)((()=>{console.log("Running useEffect: getAllfriendss");(async()=>{if(w)return;y(!0),b(null);const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;if(null===t||void 0===t||!t.id)return console.error("User ID not found"),b("User not logged in"),void y(!1);let r={user_id:t.id};console.log("FormData:",r);try{const s=await i.A.post(e+"getAllfriends",r,{headers:{Accept:"application/json","Content-Type":"application/json"}}),t=s.data.results.map((e=>e.id));p((e=>d()(e,t)?(console.log("No change in AllfriendId, skipping update"),e):(console.log("Updating AllfriendId:",t),t)))}catch(a){a.response?(console.error("Server responded with error:",a.response.data),b("Failed to fetch friends")):a.request?(console.error("No response received:",a.request),b("No response from server")):(console.error("Error setting up request:",a.message),b("An error occurred"))}finally{y(!1)}})()}),[]),(0,r.useEffect)((()=>{(async()=>{m.length>0&&(console.log("Fetching gallery for AllfriendId:",m),S())})()}),[m]);const S=async()=>{if(w)return;y(!0),b(null);const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;if(null===t||void 0===t||!t.id)return console.error("User ID not found"),y(!1),void b("User not logged in");let r={user_ids:[...m,t.id].join(", "),user_id:t.id};console.log("FormData:",r);try{const s=await i.A.post(e+"getlastestpost",r,{headers:{Accept:"application/json","Content-Type":"application/json"}});console.log(s.data.results);const t=s.data.results;c(t)}catch(a){a.response?(console.error("Server responded with error:",a.response.data),b("Failed to fetch posts")):a.request?(console.error("No response received:",a.request),b("No response from server")):(console.error("Error setting up request:",a.message),b("An error occurred"))}finally{y(!1)}};(0,r.useEffect)((()=>{const e=setInterval((()=>{A()}),2e3);return()=>clearInterval(e)}),[m]);const A=async()=>{const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;t.id;let r={user_id:t.id};try{var a=(await i.A.post(e+"getAllforumLatest",r,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;x(a.results)}catch(l){console.error(l)}};(0,r.useEffect)((()=>{const e=setInterval((()=>{k()}),2e3);return()=>clearInterval(e)}),[m]);const k=async()=>{const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;t.id;let r={user_id:t.id};try{const s=await i.A.post(e+"getAllgrouplatest",r,{headers:{Accept:"application/json","Content-Type":"application/json"}});j(s.data.results)}catch(a){a.response?(console.error("Response data:",a.response.data),console.error("Response status:",a.response.status)):a.request?console.error("Request data:",a.request):console.error("Error message:",a.message)}};(0,r.useEffect)((()=>{const e=setInterval((()=>{I()}),1500);return()=>clearInterval(e)}),[m]);const I=async()=>{const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;let r={user_ids:[...m,t.id],user_id:t.id,search:""};try{const s=await i.A.post(e+"getAlleventsLatest",r,{headers:{Accept:"application/json","Content-Type":"application/json"}});N(s.data.results)}catch(a){a.response?(console.error("Response data:",a.response.data),console.error("Response status:",a.response.status)):a.request?console.error("Request data:",a.request):console.error("Error message:",a.message)}},q=e=>{if(!e)return null;const s=new Date(e),t=new Date,r=s.getTime(),a=t.getTime()-r,l=Math.floor(a/100),o=Math.floor(l/60),n=Math.floor(o/60),i=Math.floor(n/24),c=Math.floor(i/7),d=Math.floor(i/30),u=(Math.floor(i/365),s.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",timeZone:"Europe/Oslo"})),g=s.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",timeZone:"Europe/Oslo"}),m=t.getFullYear(),p=s.getFullYear();return l<60?"Just now":o<60?`${o}m`:n<24?`${n}h ${u}`:1===i?`Yesterday ${u}`:i<7?`${i}d ${u}`:c<4?`${c}w ${u}`:d<12?`${d}m ${u}`:p===m?`${u}`:g},$=e=>{if(!e)return null;const s=new Date(e),t={timeZone:"Europe/Oslo"};return`${s.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",...t}).replace(/\//g,"-")} ${s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,...t})}`},{t:E}=(0,o.Bd)();(0,r.useEffect)((()=>{const e=localStorage.getItem("language")||"en";n.A.language!==e&&n.A.changeLanguage(e)}),[n.A,E]);const[L,C]=(0,r.useState)(!1),[D,T]=(0,r.useState)(""),[G,O]=(0,r.useState)(""),[R,U]=(0,r.useState)([]),[F,M]=(0,r.useState)(""),[Y,J]=(0,r.useState)(""),[B,V]=(0,r.useState)(""),[P,Z]=(0,r.useState)("");var z="https://backend.amourette.no/api/members/";(0,r.useEffect)((()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;V(s),H()}),[]);const H=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id};try{const e=await i.A.post(z+"getUserDetail",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(e.data.row.length>0){var t=e.data.row[0];O(t)}}catch(r){r.response||(r.request?console.error("Request data:",r.request):console.error("Error message:",r.message))}},K=async e=>{M(e),W(e),Q(e);let s={id:e,user_id:B.id};try{const e=await i.A.post(z+"getGalleryDetail",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(e.data.row.length>0){var t=e.data.row[0];C(!0),document.body.style.overflowY="hidden",T(t)}}catch(r){r.response||(r.request?console.error("Request data:",r.request):console.error("Error message:",r.message))}},Q=async e=>{let s={id:e,user_id:B.id};try{const e=await i.A.post(z+"getGalleryDetailnextprevious",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});null!==e.data.next_gallery_id&&Z(e.data.next_gallery_id),null!==e.data.previous_gallery_id&&J(e.data.previous_gallery_id)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}},W=async s=>{let t={id:s,user_id:B.id};try{var r=(await i.A.post(e+"getGalleryComments",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;U(r)}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"news_main",children:[(0,g.jsx)(l.A,{}),(0,g.jsx)("section",{className:"latest d-block py-5",children:(0,g.jsx)("div",{className:"container-lg",children:(0,g.jsxs)("div",{className:"row gy-4",children:[(0,g.jsx)("div",{className:"col-12",children:(0,g.jsx)("h1",{children:E("Latestnew")})}),(0,g.jsx)("div",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,g.jsx)("h3",{className:" overflow-hidden  rounded-3",children:E("ACTIVITYLOG")}),(0,g.jsx)("div",{className:"d-flex flex-column gap-3 news_back  rounded-3 ",children:0===s.length?(0,g.jsx)("h2",{}):s.map(((e,s)=>{const r=q(e.date);return(0,g.jsxs)("div",{className:"postblock d-flex flex-column rounded-3 overflow-hidden",children:[(0,g.jsxs)("div",{className:"d-flex justify-content-between align-items-center  px-3 py-1",children:[(0,g.jsx)("div",{className:"flex-grow-1",children:(0,g.jsxs)("div",{className:"d-flex gap-2 align-items-center",children:[(0,g.jsx)("div",{className:"flex-shrink-0",children:(0,g.jsx)(a.N_,{to:`/friend/${e.user_id}`,target:"_blank",className:"d-flex gap-2 align-items-center",children:(0,g.jsx)("div",{class:"flex-shrink-0",children:(0,g.jsx)("div",{class:"urpic ofit rounded-circle overflow-hidden",children:1===e.makeImagePrivate?(0,g.jsx)("img",{className:"w-100 h-100",src:t(7123),alt:"userpic"}):(0,g.jsx)("img",{src:e.uimage,alt:"userpic"})})})})}),(0,g.jsxs)("div",{className:"flex-grow-1",children:[(0,g.jsx)("h4",{children:e.username}),(0,g.jsx)("h5",{children:r})]})]})}),(0,g.jsx)("div",{className:"flex-shrink-0"})]}),(0,g.jsx)(a.N_,{onClick:()=>K(e.id),to:"javascript:void(0)",className:"imgblock ofit rounded-3 overflow-hidden mt-2",children:e.image.match(/\.(jpeg|jpg|gif|png|webp|bmp|svg)$/i)?(0,g.jsx)("img",{className:"w-100 h-100",src:e.image,alt:"img"}):e.image.match(/\.(mp4|mov|avi|mkv|webm|ogg|flv|3gp)$/i)?(0,g.jsxs)("video",{className:"w-100 h-100",controls:!0,alt:"video",children:[(0,g.jsx)("source",{src:e.image,type:"video/mp4"}),E("Your_browser_does")]}):null})]},s)}))})]})}),(0,g.jsx)("div",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"d-flex flex-column gap-4",children:[(0,g.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,g.jsxs)("div",{className:"d-flex align-items-center justify-content-between main_sub  rounded-3 overflow-hidden",children:[(0,g.jsx)("h3",{className:"",children:E("UpcomingEvent")}),(0,g.jsx)(a.N_,{to:"/allevents",className:"view_all   rounded-3",children:E("ViewAll")})]}),(0,g.jsx)("div",{className:"d-flex flex-column gap-3 news_back  news_right_event scroll_bar  rounded-3",children:0===v.length?(0,g.jsx)("div",{className:"col-12 text-center",children:(0,g.jsx)("h5",{children:E("No_result_found")})}):v.map(((e,s)=>(0,g.jsxs)(a.N_,{to:`/singleevent/${e.slug}`,className:"d-flex align-items-center gap-3",children:[(0,g.jsx)("div",{className:"d-block profile",children:e.image.match(/\.(jpeg|jpg|gif|png|webp|bmp|svg)$/i)?(0,g.jsx)("img",{className:"w-100 h-100 object-fit-cover",src:e.image,alt:"img"}):e.image.match(/\.(mp4|mov|avi|mkv|webm|ogg|flv|3gp)$/i)?(0,g.jsxs)("video",{controls:!0,alt:"video",children:[(0,g.jsx)("source",{src:e.image,type:"video/mp4"}),E("Your_browser_does")]}):null}),(0,g.jsxs)("div",{className:"d-flex flex-column align-items-start gap-0 ",children:[(0,g.jsx)("p",{children:$(e.created_at)}),(0,g.jsxs)("h5",{children:[e.name," "]}),(0,g.jsx)("p",{children:(0,g.jsx)("span",{children:e.description})})]})]})))})]}),(0,g.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,g.jsxs)("div",{className:"d-flex align-items-center justify-content-between main_sub  rounded-3  overflow-hidden",children:[(0,g.jsx)("h3",{children:E("ForumPosts")}),(0,g.jsx)(a.N_,{to:"/allforums",className:"view_all   rounded-3",children:E("ViewAll")})]}),(0,g.jsx)("div",{className:"d-flex flex-column gap-3 news_back  news_right_event scroll_bar  rounded-3",children:0===h.length?(0,g.jsx)("h5",{children:E("No_result_found")}):h.map(((e,s)=>{q(e.date);return(0,g.jsxs)(a.N_,{to:`/singleforums/${e.slug}`,className:"d-flex align-items-start gap-3",children:[(0,g.jsx)("div",{className:"d-block profile",children:e.image?(0,g.jsx)("img",{className:"w-100 h-100 object-fit-cover",src:e.image,alt:"userimag"}):(0,g.jsx)("img",{className:"w-100 h-100 object-fit-cover",src:t(7123),alt:"userpic"})}),(0,g.jsxs)("div",{className:"d-flex flex-column align-items-start gap-0 ",children:[(0,g.jsx)("p",{children:$(e.date)}),(0,g.jsx)("h5",{children:e.description})]})]})}))})]}),(0,g.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,g.jsxs)("div",{className:"d-flex align-items-center justify-content-between main_sub  rounded-3  overflow-hidden",children:[(0,g.jsx)("h3",{children:E("RightMenu_Groups")}),(0,g.jsx)(a.N_,{to:"/allgroup",className:"view_all  rounded-3",children:E("ViewAll")})]}),(0,g.jsx)("div",{className:"d-flex flex-column gap-3 news_back  news_right_event scroll_bar  rounded-3",children:0===f.length?(0,g.jsx)("div",{className:"col-12 text-center",children:(0,g.jsx)("h5",{children:E("LeftMenu_Nogroupfounds")})}):f.map(((e,s)=>(0,g.jsxs)(a.N_,{to:`/group/${e.slug}`,className:"d-flex align-items-center gap-3",children:[(0,g.jsx)("div",{className:"d-block profile",children:e.image.match(/\.(jpeg|jpg|gif|png|webp|bmp|svg)$/i)?(0,g.jsx)("img",{className:"w-100 h-100 object-fit-cover",src:e.image,alt:"img"}):e.image.match(/\.(mp4|mov|avi|mkv|webm|ogg|flv|3gp)$/i)?(0,g.jsxs)("video",{controls:!0,alt:"video",children:[(0,g.jsx)("source",{src:e.image,type:"video/mp4"}),E("Your_browser_does")]}):null}),(0,g.jsxs)("div",{className:"d-flex flex-column align-items-start gap-0 ",children:[(0,g.jsx)("p",{children:$(e.created_at)}),(0,g.jsxs)("h5",{children:[e.name," "]}),(0,g.jsx)("p",{children:(0,g.jsx)("span",{children:e.description})})]})]})))})]})]})})]})})})]}),(0,g.jsx)(u.d,{isOpen1:L,onClose1:()=>{C(!1),document.body.style.overflowY="auto"},seperateGallerydetail:D,UserDetail:G,LoginData:B,getUserfav:async()=>{K(F)},GalleryCommets:R,getCommentPost:async()=>{K(F)},GalleryIdDetailGet:F,previousId:P,nextId:Y,getgallerydetialnext:()=>{K(Y)},getgallerydetialprev:()=>{K(P)}})]})}}}]);
//# sourceMappingURL=9665.8919c218.chunk.js.map